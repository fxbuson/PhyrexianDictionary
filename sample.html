---
layout: internal
title: Dictionary Entry
---

<div class="sample-img">
    <img id='sample'>
</div>
<div class="sample-info">
    <div class="divider"></div>
    
    <p id='english'></p>

    <div id="searchable" onpointerup="selection_search()">
        <p class='phyrexian phy_fonted' ></p>
        <p class='phyrexian'></p>
    </div>

    <p id='breakdown'></p>

    <p><b>Notes:</b></p>
    <p id='notes'></p>

    <div class="divider"></div>
    
    <p><b>Query:</b> <span id="query-region">Select some phyrexian text...</span></p>
    
    <div id="search-results"></div>

    <div class="divider"></div>
    
</div>
<script>
    // Get the current URL
    const url = new URL(window.location.href);
    
    // Get the search parameters from the URL
    const params = new URLSearchParams(url.search);
    
    // Retrieve a specific variable
    const id = params.get('id');

    const json = `{{ site.data.PhyrexianAPI | jsonify }}`
    const data = JSON.parse(json)

    document.getElementById('sample').setAttribute('src', 'images/' + data.samples[id].Name + '.jpg')
    
    var phy_instances = document.getElementsByClassName("phyrexian")
    for (var i = 0; i < phy_instances.length; i++) {
        phy_instances[i].innerHTML = data.samples[id].Regular;
    }
    document.getElementById('english').innerHTML = data.samples[id].English
    document.getElementById('notes').innerHTML = data.samples[id].Notes

    document.title = data.samples[id].Name + ' - Phyrexian Dictionary';

    function change_color(obj, col){
        var items = document.getElementsByClassName(obj.className)
        for(var index=0;index < items.length;index++){
            items[index].style.color = col;
        }
    }

    function unvowel(phy){
        const vowels = 'aeiouyøɒə';
        for (v in vowels){
            phy = phy.replaceAll(vowels[v], '');
        }
        return phy;
    }

    function selection_search(){
        const query = rangy.getSelection(document.getElementById('searchable')).toString();
        document.getElementById('search-results').innerHTML = ''
        if (query == ''){
            document.getElementById('query-region').innerHTML = 'Select some phyrexian text...';
        }
        else{
            document.getElementById('query-region').innerHTML = query;
        }
        
        const unvow_query = unvowel(query);
        for (idx in data.dictionary){
            let word = data.dictionary[idx].phyrexian;
            let unvow_word = unvowel(word)
            if (unvow_query.includes(unvow_word)){
                document.getElementById('search-results').innerHTML += '<p><span class="phy_fonted">'+ word +'</span><a href="{{site.baseurl}}/entry?id='+ idx +'">'+ word +'</a> - '+ data.dictionary[idx].translation +'</p>';
            }
        }
    }
    
</script>
